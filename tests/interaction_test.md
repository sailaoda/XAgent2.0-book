# AsyncFunctionDef main
**main函数**: 该函数的功能是通过HTTP异步请求与服务器进行交互，获取会话cookie，发送交互消息，并释放会话。

该`main`函数是一个异步函数，它使用`httpx`库创建一个异步HTTP客户端，并与服务器进行几个HTTP请求的交互。函数的默认参数`url`设置为`"http://localhost:8080"`，这是与服务器交互的基础URL。

函数首先向服务器的`/get_cookie`端点发送POST请求，以获取会话cookie。请求成功后，服务器返回的响应被打印出来，并且从响应中提取cookie信息。

接下来，函数定义了一个新的URL`main_url`，其值为`"http://127.0.0.1:37122"`。这个URL用于向服务器发送交互消息。函数通过向`/interaction_message`端点发送POST请求，并附带一个JSON格式的消息体，来发送交互消息。消息体包含了用户想要查询的信息，例如从SFO到PKX的机票价格。如果请求成功，服务器返回的JSON响应被打印出来。

最后，无论前面的请求是否成功，`finally`块都会执行。在这个块中，函数向服务器的`/release_session`端点发送POST请求，同时附带之前获取的cookie，以释放或结束当前的会话。请求成功后，服务器返回的响应同样被打印出来。

**注意**:
- 由于`main`函数是异步的，调用它时需要使用`await`关键字，或者在异步环境中运行。
- 函数中使用了`httpx.AsyncClient`来创建异步HTTP客户端，这要求在使用前安装`httpx`库。
- 函数中的异常处理没有明确包含，如果服务器响应状态码表示错误（如4xx或5xx），`res.raise_for_status()`将抛出异常。在实际应用中，可能需要对异常进行捕获和处理。
- 函数使用了`finally`块来确保即使在发送交互消息时发生异常，也能够发送释放会话的请求，这是良好的资源管理实践。
- 在实际部署时，需要根据实际的服务器地址和端口来调整`url`和`main_url`的值。
***
