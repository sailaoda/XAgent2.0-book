# ClassDef WebSummary
**WebSummary 类的功能**：该类的功能是解析网页文本，并根据给定的提示词提取与之相关的所有信息。确保提取的信息仅限于网页中显示的内容，不包含个人观点。

**详细代码分析与描述**：
WebSummary 类继承自 BaseModel，用于定义网页摘要信息的数据结构。该类包含三个字段：summary、related_details 和 useful_hyperlinks，每个字段都有明确的要求和限制条件。

- `summary` 字段：类型为字符串（str），用于存储对网页内容的简短摘要，要求摘要包含不超过50个单词，并确保包含与提示词（`Prompt`）相关的所有重要信息。在摘要中，不应包含网页上未显示的信息，也不应包含个人意见。

- `related_details` 字段：类型为字符串（str），用于列出与提示词相关的网页详细信息，要求详细信息的字数不超过400字。同样，不应包含网页上未显示的信息，也不应包含个人意见。

- `useful_hyperlinks` 字段：类型为字符串列表（list[str]），用于选择与提示词相关的有用超链接，最多包含3个项目。在选择超链接时，需要确保链接对于进一步浏览是有用的，并且不应提供重复的超链接。

在项目中，WebSummary 类被 `parse_web_text` 异步函数调用。该函数接收一个提示词（prompt）和网页文本（webpage），并返回一个 WebSummary 实例。函数的注释中强调了提供的内容应与网页的语言保持一致，并且内容应基于网页上显示的信息，不应添加个人观点。

**注意事项**：
- 在使用 WebSummary 类时，开发者需要注意字段的描述要求，确保提供的信息符合要求，不超出字数限制，并且与提示词相关。
- 在实际解析网页文本时，需要注意不要引入个人观点，只提供网页上实际显示的信息。
- 在选择有用的超链接时，应避免重复，并确保链接的相关性和实用性。
***
# AsyncFunctionDef parse_web_text
**parse_web_text 函数**: 该函数的功能是解析从网页中获取的文本，并根据给定的提示来辅助解析，确保提供的内容与所解析的网页内容语言一致。

该`parse_web_text`函数是一个异步函数，它接受两个关键字参数：`prompt`和`webpage`。`prompt`参数是一个字符串，用于指导如何解析网页内容；`webpage`参数是一个字符串，包含了要解析的网页文本内容。函数返回一个`WebSummary`对象，该对象应该包含解析后的网页摘要信息。

在函数的文档字符串中，提供了一个示例性的提示和网页内容，用于说明函数的用途。函数的实际行为应该是根据`prompt`中的指示来处理`webpage`中的文本，并生成一个摘要。

在项目中调用`parse_web_text`函数的代码位于`XAgent/tools/toolserver.py`文件中。在`summary_webpage`方法中，该函数被用于处理一个包含网页内容的列表或单个网页内容。如果`result`是一个列表，那么会为列表中的每个网页内容创建一个异步任务来执行`parse_web_text`函数。这些任务并发执行，并在完成后收集结果。如果`result`不是列表，而是单个的字符串，那么会直接对这个字符串调用`parse_web_text`函数。

在处理完毕后，无论是单个结果还是多个结果，都会对返回的`WebSummary`对象进行处理，比如截取有用的超链接列表中的前三个，并将结果转储为模型的形式。

**注意**：
- 由于`parse_web_text`是一个异步函数，调用它时需要使用`await`关键字，或者将其封装在一个异步任务中。
- 函数返回的`WebSummary`对象需要有`useful_hyperlinks`属性和`model_dump`方法，以便在调用处进行进一步处理。
- 在实际使用该函数时，需要确保传入的`prompt`和`webpage`参数与目标网页的语言一致，以便正确解析文本。
- 该函数可能是与自然语言处理或机器学习模型集成的一部分，因此在实现时需要注意模型的输入输出规范和性能考量。
***
